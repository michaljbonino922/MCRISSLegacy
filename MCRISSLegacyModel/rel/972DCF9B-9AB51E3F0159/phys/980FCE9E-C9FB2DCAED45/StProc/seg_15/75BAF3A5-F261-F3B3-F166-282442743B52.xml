<?xml version = '1.0' encoding = 'UTF-8'?>
<StoredProcedureSqlServerv2k5 class="oracle.dbtools.crest.model.design.storage.sqlserver.v2k5.StoredProcedureSqlServerv2k5" name="[sp_GetAnnualPhysicalData]" directorySegmentName="seg_15" id="75BAF3A5-F261-F3B3-F166-282442743B52">
<sourceDDLFile>create MCRISS script - MCRISS OTA.txt</sourceDDLFile>
<createdBy>MichalBonino</createdBy>
<createdTime>2024-04-29 19:28:41 UTC</createdTime>
<ownerDesignName>MCRISSLegacyModel</ownerDesignName>
<body><![CDATA[@MarineCandidateID int, 
 @ExamDate  date.me 
AS 
 
SELECT 
 COALESCE(AP.EXAM_PURPOSE_ID, SPACE(0)) AS EXAM_PURPOSE_ID, 
 COALESCE(AP.EXAM_TAKEN_AT, SPACE(0)) AS EXAM_TAKEN_AT, 
 COALESCE(AP.RANK, SPACE(0)) AS RANK, 
 COALESCE(AP.MOS, SPACE(0)) AS MOS, 
 COALESCE(AP.KNOWN_ALLERGIES, SPACE(0)) AS KNOWN_ALLERGIES, 
 COALESCE(AP.UNIT_SCHOOL_UIC, SPACE(0)) AS UNIT_SCHOOL_UIC, 
 COALESCE(AP.LOCATION_OF_HEALTH_RECORD, SPACE(0)) AS LOCATION_OF_HEALTH_RECORD, 
 COALESCE(AP.LOCATION_OF_DENTAL_RECORD, SPACE(0)) AS LOCATION_OF_DENTAL_RECORD, 
 COALESCE(CONVERT(CHAR(11), AP.DATE_LAST_COMPLETE_MEDICAL, 106), SPACE(0)) AS DATE_LAST_COMPLETE_MEDICAL, 
 COALESCE(AP.PURPOSE_OF_MEDICAL_EXAM, SPACE(0)) AS PURPOSE_OF_MEDICAL_EXAM, 
 COALESCE(CONVERT(CHAR(11), AP.DATE_LAST_COMPLETE_DENTAL, 106), SPACE(0)) AS DATE_LAST_COMPLETE_DENTAL, 
 COALESCE(AP.TYPE_OF_DENTAL_EXAM, SPACE(0)) AS TYPE_OF_DENTAL_EXAM, 
 COALESCE(AP.DENTAL_CLASS_ID, 0) AS DENTAL_CLASS, 
 COALESCE(CONVERT(CHAR(11), AP.DATE_LAST_PAP, 106), SPACE(0)) AS DATE_LAST_PAP, 
 COALESCE(AP.PAP_RESULTS, SPACE(0)) AS PAP_RESULTS, 
 COALESCE(CONVERT(CHAR(11), AP.DATE_LAST_MAMMORGRAM, 106), SPACE(0)) AS DATE_LAST_MAMMORGRAM, 
 COALESCE(AP.MAMMOGRAM_RESULTS, SPACE(0)) AS MAMMOGRAM_RESULTS, 
 COALESCE(CONVERT(CHAR(11), AP.DATE_LAST_HIV, 106), SPACE(0)) AS DATE_LAST_HIV, 
 COALESCE(CONVERT(VARCHAR(3), AP.BLOOD_PRESSURE_SYSTOLIC), SPACE(0)) AS BLOOD_PRESSURE_SYSTOLIC, 
 COALESCE(CONVERT(VARCHAR(3), AP.BLOOD_PRESSURE_DIASTOLIC), SPACE(0)) AS BLOOD_PRESSURE_DIASTOLIC, 
 COALESCE(CONVERT(VARCHAR(6), AP.BODY_FAT_PCT), SPACE(0)) AS BODY_FAT_PCT, 
 COALESCE(CONVERT(VARCHAR(2), AP.HEIGHT), 0) AS HEIGHT, 
 COALESCE(CONVERT(VARCHAR(3), AP.WEIGHT), 0) AS WEIGHT, 
 COALESCE(AP.MEDICAL_DISPOSITION_ID, 0) AS MEDICAL_DISPOSITION_ID, 
 COALESCE(AP.CONSULTATION_TYPE, SPACE(0)) AS CONSULTATION_TYPE, 
 COALESCE(AP.BUMED_DETERMINATION_ID, 0) AS BUMED_DETERMINATION_ID, 
 COALESCE(AP.ABSENT_QUESTION, SPACE(0)) AS ABSENT_QUESTION, 
 COALESCE(AP.ABSENT_QUESTION_EXPLANATION, SPACE(0)) AS ABSENT_QUESTION_EXPLANATION, 
 COALESCE(AP.PHYSICIAN_CARE_QUESTION, SPACE(0)) AS PHYSICIAN_CARE_QUESTION, 
 COALESCE(AP.PHYSICIAN_CARE_QUESTION_EXPLANATION, SPACE(0)) AS PHYSICIAN_CARE_QUESTION_EXPLANATION, 
 COALESCE(AP.PRESCRIPTION_MEDICATION_QUESTION, SPACE(0)) AS PRESCRIPTION_MEDICATION_QUESTION, 
 COALESCE(AP.PRESCRIPTION_MEDICATION_QUESTION_EXPLANATION, SPACE(0)) AS PRESCRIPTION_MEDICATION_QUESTION_EXPLANATION, 
 COALESCE(AP.PHYSICAL_DEFECT_QUESTION, SPACE(0)) AS PHYSICAL_DEFECT_QUESTION, 
 COALESCE(AP.PHYSICAL_DEFECT_QUESTION_EXPLANATION, SPACE(0)) AS PHYSICAL_DEFECT_QUESTION_EXPLANATION, 
 COALESCE(AP.ADDITIONAL_COMMENTS, SPACE(0)) AS ADDITIONAL_COMMENTS 
FROM 
 ANNUAL_PHYSICAL AP 
WHERE 
 AP.MARINE_CANDIDATE_ID = @MarineCandidateID AND 
 AP.EXAM_DATE   = @ExamDate]]></body>
<schema>3925E19F-DC76-90A4-B892-D7A526C79632</schema>
<database>B007042D-D2E3-F83F-481F-CEB23B21CB30</database>
</StoredProcedureSqlServerv2k5>