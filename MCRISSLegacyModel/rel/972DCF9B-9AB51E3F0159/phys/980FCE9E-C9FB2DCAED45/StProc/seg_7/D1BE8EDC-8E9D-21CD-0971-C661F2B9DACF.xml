<?xml version = '1.0' encoding = 'UTF-8'?>
<StoredProcedureSqlServerv2k5 class="oracle.dbtools.crest.model.design.storage.sqlserver.v2k5.StoredProcedureSqlServerv2k5" name="[GetOCSRecord]" directorySegmentName="seg_7" id="D1BE8EDC-8E9D-21CD-0971-C661F2B9DACF">
<sourceDDLFile>create MCRISS script - MCRISS OTA.txt</sourceDDLFile>
<createdBy>MichalBonino</createdBy>
<createdTime>2024-04-29 19:28:42 UTC</createdTime>
<ownerDesignName>MCRISSLegacyModel</ownerDesignName>
<body><![CDATA[@OCSID  int 
AS 
 
SELECT 
 O.OCS_ID, 
 CONVERT(VARCHAR(11), O.SCHEDULED_SHIP_DATE, 106) AS SCHEDULED_SHIP_DATE, 
 --- YEAR(O.SCHEDULED_SHIP_DATE) + (CASE WHEN MONTH(O.SCHEDULED_SHIP_DATE) >= 10 THEN 1 ELSE 0 END) AS SHIP_YEAR, 
 C.FISCAL_YEAR AS SHIP_YEAR, 
 C.TRAINING_TYPE_CODE, C.CLASS_NUMBER, 
 CASE C.TRAINING_TYPE_CODE  
  WHEN 'PLCSR' THEN 'OFF1' 
  WHEN 'PLCJR' THEN 'OFF2' 
  WHEN 'PLCCOMB' THEN 'OFFA' 
  WHEN 'OCC' THEN 'OFFC' 
  ELSE SPACE(0) 
 END AS TRAINING_TYPE, 
 CASE C.CLASS_NUMBER 
  WHEN 1 THEN 'INCR1' 
  WHEN 2 THEN 'INCR2' 
  WHEN 0 THEN SPACE(0) 
  ELSE COALESCE(CONVERT(VARCHAR, C.CLASS_NUMBER), SPACE(0)) 
 END AS CLASS_INCREMENT, 
 CONVERT(VARCHAR(11), O.PEBD, 106) AS PAY_ENTRY_BASE_DATE, 
 CONVERT(VARCHAR(11), O.REPORT_DATE, 106) AS REPORT_DATE, 
 O.COMPANY, O.PLATOON, O.JOIN_TYPE, O.ACCESSION_SUBMITTED,  
 COALESCE(O.CLASS_RESULT_CODE, SPACE(0)) AS CLASS_RESULT_CODE, 
  CONVERT(VARCHAR(11), O.CLASS_RESULT_DATE, 106) AS RESULT_DATE, 
 COALESCE(O.DROP_REASON, SPACE(0)) AS DROP_REASON,  
 COALESCE(CONVERT(VARCHAR(2), O.TRAINING_DROP_WEEK), SPACE(0)) AS TRAINING_DROP_WEEK, 
 O.ACADEMIC_AVERAGE, O.MILITARY_SKILLS_AVERAGE, O.LEADERSHIP_AVERAGE,  
 O.CLASS_AVERAGE, O.CLASS_STANDING, 
 COALESCE(O.NOTICE_OF_ELIGIBILITY, SPACE(0)) AS NOTICE_OF_ELIGIBILITY, 
 COALESCE(O.AIRLINE, SPACE(0)) AS AIRLINE,  
 COALESCE(O.FLIGHT_NUMBER, SPACE(0)) AS FLIGHT_NUMBER,  
 O.ARRIVAL_DATE,   
 COALESCE(O.GOV_POV, SPACE(0)) AS GOV_POV, 
 COALESCE(D.DROP_REASON_CATEGORY, SPACE(0)) AS DROP_REASON_CATEGORY, 
 COALESCE(O.CLASS_COMMENTS, SPACE(0)) AS CLASS_COMMENTS, 
 COALESCE(CONVERT(VARCHAR(11), C.CLASS_BEGIN_DATE, 106), SPACE(0)) AS CLASS_BEGIN_DATE, 
 COALESCE(CONVERT(VARCHAR(11), C.CLASS_END_DATE, 106), SPACE(0)) AS CLASS_END_DATE, 
 COALESCE(O.COMPONENT_CODE, SPACE(0)) AS COMPONENT_CODE 
FROM 
 OCS O WITH (NOLOCK) 
 INNER JOIN OCS_CLASS C ON  
  (O.OCS_CLASS_ID = C.CLASS_ID AND 
  O.OCS_ID = @OCSID) 
 LEFT OUTER JOIN OCS_DROP_REASON D ON O.DROP_REASON = D.DROP_REASON_CODE]]></body>
<schema>72379847-5555-B149-4E45-17F849103A51</schema>
<database>B007042D-D2E3-F83F-481F-CEB23B21CB30</database>
</StoredProcedureSqlServerv2k5>