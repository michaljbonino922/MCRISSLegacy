<?xml version = '1.0' encoding = 'UTF-8'?>
<StoredProcedureSqlServerv2k5 class="oracle.dbtools.crest.model.design.storage.sqlserver.v2k5.StoredProcedureSqlServerv2k5" name="[sp_GetNROTCShellInforma.on]" directorySegmentName="seg_18" id="7E6061F2-0956-1DF7-4FD1-5537256177CF">
<sourceDDLFile>Appian.sql</sourceDDLFile>
<createdBy>MichalBonino</createdBy>
<createdTime>2024-04-29 23:57:48 UTC</createdTime>
<ownerDesignName>MCRISSLegacyModel</ownerDesignName>
<body><![CDATA[@NWAID int 
AS 
 
--- GET THE MAX CANDIDATE STATUS ID AND THE MAX PFT ID 
DECLARE @CandidateStatusId  int 
DECLARE @MaxPFTID   int 
 
SELECT  
 @CandidateStatusId  = dbo.GetMaxStatusID(@NWAID), 
 @MaxPFTID  = dbo.GetMaxPFTID(@NWAID) 
 
 
SELECT  
 P.LAST_NAME, P.FIRST_NAME, P.LEGAL_MIDDLE_NAME, UPPER(COALESCE(P.SUFFIX_CD, SPACE(0))) AS SUFFIX_CD, 
 P.SOCIAL_SECURITY_NUMBER, CONVERT(VARCHAR(11), MC.DATE_OF_BIRTH, 106) AS DATE_OF_BIRTH, 
 MC.GENDER_CODE,  
 RO.ORGANIZATION_ID AS RECRUITING_ORG_ID,  
 RO.SHORT_NAME AS RECRUITING_ORG_NAME, 
 RO.ORGANIZATION_TYPE AS RECRUITING_ORG_TYPE,  
 NWA.RECRUITER_OF_RECORD_ID,  
 COALESCE(RTRIM(RP.RANK_CODE), SPACE(0)) + SPACE(1)  +  
  COALESCE(RTRIM(RCRTR.LAST_NAME), SPACE(0))  + SPACE(1) +  
  COALESCE(RTRIM(RCRTR.FIRST_NAME), SPACE(0)) + SPACE(1) +  
  COALESCE(RTRIM(RCRTR.LEGAL_MIDDLE_NAME), SPACE(0)) AS RECRUITER_OF_RECORD_NAME, 
 CS.STATUS_CODE, CS.DISPOSITION_CODE,   
 SD.STATUS_DESCRIPTION, SD.DISPOSITION_DESCRIPTION, 
 --- PFT DATA 
 COALESCE(PFT.PFT_ID, 0) AS PFT_ID, 
 COALESCE(CONVERT(CHAR(11), PFT.PFT_DATE, 106), SPACE(0)) AS PFT_DATE, 
 COALESCE(PFT.PFT_HEIGHT, 0) AS PFT_HEIGHT, 
 COALESCE(PFT.PFT_WEIGHT, 0) AS PFT_WEIGHT, 
 COALESCE(PFT.PFT_BODY_FAT_PCT, 0) AS PFT_BODY_FAT_PCT, 
 COALESCE(PFT.PFT_CRUNCHES, 0) AS PFT_CRUNCHES, 
 COALESCE(PFT.PFT_RUN_MINUTES, 0) AS PFT_RUN_MINUTES, 
 COALESCE(PFT.PFT_RUN_SECONDS, 0) AS PFT_RUN_SECONDS, 
 COALESCE(PFT.PFT_PULLUPS, 0) AS PFT_PULLUPS, 
 COALESCE(PFT.PFT_HANG, 0) AS PFT_HANG, 
 COALESCE(PFT.PFT_SCORE, SPACE(0)) AS PFT_SCORE, 
 COALESCE(NWA.OFFICER_COMPONENT_CODE, SPACE(0)) AS  OFFICER_COMPONENT_CODE, 
 COALESCE(CONVERT(VARCHAR(11), NB.PROGRAM_BEGIN_DATE, 106), SPACE(0)) AS PROGRAM_BEGIN_DATE, 
 COALESCE(CONVERT(VARCHAR(11), NB.PROGRAM_GRAD_DATE, 106), SPACE(0)) AS PROGRAM_GRAD_DATE, 
 COALESCE(NB.ADVANCED_PROGRAM, SPACE(0)) AS ADVANCED_PROGRAM 
FROM   
 NWA INNER JOIN PERSON P ON  
  (NWA.NWA_ID = @NWAID AND 
  NWA.MARINE_CANDIDATE_ID = P.PERSON_ID) 
 INNER JOIN MARINE_CANDIDATE MC ON P.PERSON_ID = MC.MARINE_CANDIDATE_ID  
 INNER JOIN RECRUITING_PERSON RP ON RP.RECRUITING_PERSON_ID = NWA.RECRUITER_OF_RECORD_ID 
 INNER JOIN PERSON RCRTR ON RP.RECRUITING_PERSON_ID = RCRTR.PERSON_ID  
 INNER JOIN CANDIDATE_STATUS CS ON  
  (CS.CANDIDATE_STATUS_ID = @CandidateStatusId AND 
  NWA.NWA_ID = CS.NWA_ID) 
 INNER JOIN STATUS_DISPOSITION SD ON  
  (CS.STATUS_TYPE = SD.STATUS_TYPE AND  
  CS.STATUS_CODE = SD.STATUS_CODE AND  
  CS.DISPOSITION_CODE = SD.DISPOSITION_CODE) 
 INNER JOIN RECRUITING_ORGANIZATION RO ON NWA.ORGANIZATION_OF_RECORD_ID = RO.ORGANIZATION_ID  
 LEFT OUTER JOIN OFFICER_CONTRACT C ON C.NWA_ID = @NWAID 
 LEFT OUTER JOIN PFT ON  
  (NWA.NWA_ID = PFT.NWA_ID AND 
  PFT.PFT_ID = @MaxPFTID)  
 LEFT OUTER JOIN NROTC_BOOST NB ON NWA.NWA_ID = NB.NWA_ID]]></body>
<schema>DD6CF638-A2EB-2E1B-FF13-422CA718DE2D</schema>
<database>EA42DEDC-DFC5-B775-3079-AD0E133F5E1D</database>
</StoredProcedureSqlServerv2k5>