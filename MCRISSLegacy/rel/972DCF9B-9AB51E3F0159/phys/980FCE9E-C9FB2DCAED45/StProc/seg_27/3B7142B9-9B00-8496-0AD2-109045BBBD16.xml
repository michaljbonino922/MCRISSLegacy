<?xml version = '1.0' encoding = 'UTF-8'?>
<StoredProcedureSqlServerv2k5 class="oracle.dbtools.crest.model.design.storage.sqlserver.v2k5.StoredProcedureSqlServerv2k5" name="[UpdateShipQuotaRqmtForMCRC]" directorySegmentName="seg_27" id="3B7142B9-9B00-8496-0AD2-109045BBBD16">
<sourceDDLFile>create MCRISS script - MCRISS OTA.txt</sourceDDLFile>
<createdBy>MichalBonino</createdBy>
<createdTime>2024-04-29 19:28:43 UTC</createdTime>
<ownerDesignName>MCRISSLegacy</ownerDesignName>
<body><![CDATA[@ORGANIZATION_ID  int, 
 @FISCAL_YEAR  int, 
 @MONTH_CODE  int, 
 @CATEGORY_CODE  varchar(2), 
 @QUOTA_VALUE  int = 0, 
 @REQMT_VALUE  int = 0, 
 @USER_LOGIN  varchar(15) 
AS 
 
BEGIN 
 
 IF EXISTS (SELECT 1 FROM SHIPPING_QUOTA_PLAN WHERE ORGANIZATION_ID = @ORGANIZATION_ID 
  AND FISCAL_YEAR = @FISCAL_YEAR AND CATEGORY_CODE = @CATEGORY_CODE AND MONTH_CODE = @MONTH_CODE) 
  
  BEGIN 
   UPDATE SHIPPING_QUOTA_PLAN SET QUOTA_VALUE = @QUOTA_VALUE, 
   REQMT_VALUE = @REQMT_VALUE, USER_LOGIN = @USER_LOGIN, UPDATE_DATE = GETDATE() 
   WHERE ORGANIZATION_ID = @ORGANIZATION_ID 
   AND FISCAL_YEAR = @FISCAL_YEAR 
   AND CATEGORY_CODE = @CATEGORY_CODE 
   AND MONTH_CODE = @MONTH_CODE    
  END 
  
 ELSE 
  
  BEGIN 
   INSERT INTO SHIPPING_QUOTA_PLAN (ORGANIZATION_ID, FISCAL_YEAR,  
   CATEGORY_CODE, MONTH_CODE, QUOTA_VALUE, REQMT_VALUE, USER_LOGIN, UPDATE_DATE) VALUES  
   (@ORGANIZATION_ID, @FISCAL_YEAR, @CATEGORY_CODE, @MONTH_CODE, @QUOTA_VALUE, @REQMT_VALUE, @USER_LOGIN, GETDATE()) 
  END 
 
END]]></body>
<schema>72379847-5555-B149-4E45-17F849103A51</schema>
<database>B007042D-D2E3-F83F-481F-CEB23B21CB30</database>
</StoredProcedureSqlServerv2k5>